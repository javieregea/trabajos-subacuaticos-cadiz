---
import { businessInfo } from '../data/businessInfo.js';

export interface Props {
  variant?: 'primary' | 'emergency' | 'secondary' | 'outline';
  size?: 'sm' | 'md' | 'lg' | 'xl';
  text?: string;
  subtext?: string;
  showPhone?: boolean;
  className?: string;
  phoneOnly?: boolean;
}

const {
  variant = 'primary',
  size = 'md',
  text = 'LLAMAR AHORA',
  subtext,
  showPhone = true,
  className = '',
  phoneOnly = false
} = Astro.props;

const phone = businessInfo.phone;
const phoneFormatted = phone.replace(/\s/g, '');

// Size classes
const sizeClasses = {
  sm: 'px-4 py-2 text-sm',
  md: 'px-6 py-3 text-base',
  lg: 'px-8 py-4 text-lg',
  xl: 'px-10 py-5 text-xl'
};

// Variant classes
const variantClasses = {
  primary: 'bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl',
  emergency: 'bg-red-600 hover:bg-red-700 text-white shadow-lg hover:shadow-xl animate-pulse',
  secondary: 'bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl',
  outline: 'border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white'
};

const buttonClasses = `
  ${sizeClasses[size]}
  ${variantClasses[variant]}
  font-bold rounded-lg transition-all duration-300 transform hover:scale-105
  flex items-center justify-center gap-2 no-underline
  ${className}
`;
---

<a
  href={`tel:${phoneFormatted}`}
  class={buttonClasses}
  aria-label={`Llamar ahora al ${phone}`}
>
  <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
    <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
  </svg>

  <div class="flex flex-col">
    <span>{text}</span>
    {showPhone && !phoneOnly && (
      <span class="text-sm opacity-90">{phone}</span>
    )}
    {phoneOnly && (
      <span class="text-lg font-bold">{phone}</span>
    )}
    {subtext && (
      <span class="text-xs opacity-80">{subtext}</span>
    )}
  </div>
</a>

<style>
  a:hover {
    text-decoration: none;
  }

  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: .8;
    }
  }
</style>